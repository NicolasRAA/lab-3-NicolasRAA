# Лабораторная работа №3: Виртуализация

## Оглавление
- [Цель работы](#цель-работы)
- [Выполненные шаги](#выполненные-шаги)
- [Заключение](#заключение)

## Цель работы
Настроить виртуальные машины A, B и C с использованием VirtualBox, обеспечить их сетевое взаимодействие с соблюдением следующих условий:
- Машина A может взаимодействовать с машинами B и C.
- Машина B не может взаимодействовать с машиной C.

## Выполненные шаги

### 1. Установка Oracle VirtualBox
- При установке возникла ошибка "Missing Dependencies: Python Core".
- Зависимости были установлены с использованием команды:
  ```bash
  pip install pywin32
  ```
- Установка VirtualBox успешно завершена после установки необходимых зависимостей.

### 2. Создание ВМ-A
 - Выбрана операционная система: Linux -> Ubuntu (64-bit).
 - Настроены параметры ВМ:
      - 4 ГБ оперативной памяти.
      - 2 процессора (CPU).
      - 20 ГБ виртуального жесткого диска.
 - Контроллер IDE изначально был пустым. Добавлен ISO-образ `ubuntu-24.04.1-desktop-amd64.iso` для установки Ubuntu:
      - Этот образ позволяет загрузить операционную систему в ВМ.

### 3. Установка Ubuntu/Linux на ВМ-A
   - ВМ-A была запущена, и отображено приветственное окно "Welcome to Ubuntu".
   - Создана учетная запись пользователя.
   - Установка завершена, ВМ успешно перезагружена.

### 4. Проверка подключения к сети на ВМ-A
   - Для проверки сети использована команда:
     ```bash
     ping -c 4 google.com
     ```
   - Успешный результат подтвердил доступ ВМ-A к Интернету.

### 5. Создание ВМ-B, установка Ubuntu и тестирование подключения
   - Параметры ВМ-B:
      - 3 ГБ оперативной памяти.
      - 2 процессора (CPU).
      - 10 ГБ виртуального жесткого диска.
   - Установка Ubuntu выполнена аналогично ВМ-A.
   - Проверка подключения выполнена командой:
     ```bash
     ping -c 4 google.com
     ```
   - Подключение успешно.

### 6. Ошибка при попытке соединения ВМ-A и ВМ-B
   - Настроена внутренняя сеть (Internal Network) с именем `intnet` для обеих ВМ.
   - После изменения настройки сети возникла ошибка подключения:
      - Это произошло из-за отсутствия DHCP-сервера, который распределяет IP-адреса в Internal Network.
      - Кроме того, Internal Network изолирует ВМ от доступа в Интернет.
    
### 7. Создание NatNetwork
   - Создана сеть типа NatNetwork с именем `Intinter` и IPv4-префиксом `192.168.100.0/24`:
      - NatNetwork позволяет автоматическое назначение IP-адресов и подключение к Интернету.
   - Обе ВМ подключены к сети NatNetwork, после чего они были перезагружены.
   - Командой `ip a` проверены IP-адреса:
      - ВМ-A: `192.168.100.4`
      - ВМ-B: `192.168.100.5`
    - Подключение внутри сети протестировано:
      ```bash
      ping -c 4 192.168.100.4 #В ВМ-А
      ping -c 4 192.168.100.5 #В ВМ-B
      ```

### 8. Создание и настройка ВМ-C
   - ВМ-C создана и настроена аналогично ВМ-A и ВМ-B.
   - Подключена к сети NatNetwork.
   - Проверен IP-адрес коммандой `ip a` (192.168.100.6) и доступ в Интернет с помощью команд:
     ```bash
     ping -c 4 google.com
     ping -c 4 192.168.100.6
     ```

### 9. Блокировка связи ВМ-B и ВМ-C
   - Добавлено правило для блокировки связи ВМ-B и ВМ-C:
     ```bash
     sudo ufw deny from 192.168.100.5 to 192.168.100.6
     ```
   - Проверено состояние файервола:
     ```bash
     sudo ufw status verbose
     ```
      - Файервол был активирован, и правило ограничения отображалось корректно.
   - Добавлено дополнительное правило для исходящих запросов в ВМ-В:
     ```bash
     sudo ufw deny out to 192.168.100.6
     ```
   - Проверка c BM-B:
     ```bash
     ping -c 4 192.168.100.6
     ```
      - Результат: 100% packet loss, как и ожидалось.

### 10. Создание репозитория, каталога Report и добавление README.md
   - С использованием терминала Ubuntu создан репозиторий, клонирован для локальной работы, а также создан каталог Report:
     ```bash
     mkdir Report
     cd Report
     touch README.md
     ```
   - Загружено содержимое репозитория на GitHub с использованием стандартных команд Git:
     ```bash
     git add .
     git commit -m "Added the report from the terminal"
     git push origin main
     ```
     
## Заключение 
В ходе выполнения лабораторной работы были настроены три виртуальные машины с установленной ОС Ubuntu. Выполнена настройка сети для взаимодействия между машинами и запрета доступа между ВМ-B и ВМ-C с использованием правил файервола. Работа успешно завершена, отчет оформлен и загружен на GitHub.
